<style>
    .highlight
    {
        color: red;
    }

    .footnote
    {
        color: gray;
        font-size: 90%;
    }

    img
    {
        display: block;
        margin: auto;
    }

    .img-desc
    {
        color: gray;
        text-align: center;
        margin-bottom: 1%;
    }
</style>

# 메모리와 캐시 메모리
## RAM의 특징과 종류
- RAM의 특징
    - 휘발성 저장 장치
    - CPU는 보조기억장치에 직접 접근하지 못함. 따라서 보조기억장치에는 '보관할 대상'을 저장하고, RAM에는 '실행할 대상'을 저장함.
        - 보조기억장치에서 주기억장치로 복사

- RAM의 용량과 성능
    - 용량이 적다면 보조기억장치에서 실행할 프로그램을 가져오는 일이 잦아 실행 시간이 길어짐
    - 용량이 크다면 많은 프로그램을 동시에 빠르게 실행하는 데 유리함.
    - 하지만 용량이 필요 이상으로 커졌을 떄 속도가 그에 비례하여 증가하지 않음

- RAM의 종류
    - DRAM(Dynamic RAM)
        - 저장된 데이터가 동적으로 변하는(사라지는) RAM => 시간이 지나면 저장된 데이터가 점차 사라지는 RAM
        - 데이터의 소멸을 막기 위해 일정 주기로 데이터를 재활성화(다시 저장)해야 한다.
        - 소비 전력이 비교적 낮고, 저렴하고, 집적도가 높아 대용량으로 설계하기가 용이하여 일반적으로 사용된다.
    - SRAM(Static RAM)
        - 저장된 데이터가 소실되지 않는 RAM
        - DRAM과 비교하면..
            - 데이터 재활성화 작업이 필요 없으며, 속도도 비교적 더 빠르다.
            - 집적도가 낮고, 소비 전력도 크며, 가격도 비싸다.
        - 캐시 메모리에서 사용됨.
    - SDRAM(Synchronous Dynamic RAM)
        - 클럭 신호와 동기화된 DRAM
            - 클럭 타이밍에 맞춰 CPU와 정보를 주고받을 수 있음
    - DDR SDRAM(Double Data Rate SDRAM)
        - 최근 가장 흔히 사용되는 RAM
        - 대역폭(Data Rate)을 넓혀 속도를 빠르게 만든 SDRAM
            - 데이터를 주고받는 길의 너비
        - 한 클럭당 하나의 데이터를 주고받을 수 있는 SDRAM을 SDR SDRAM(Single Data Rate SDRAM)이라 부르기도 함.
        - DDR2는 SDR 대비 대역폭 2배. DDR3는 DDR2 대비 대역폭 2배, DDR4는 DDR3 대비 대역폭 2배

| 특징 | DRAM | SRAM |
| --- | --- | --- |
| 재충전 | 필요함 | 필요없음 |
| 속도 | 느림 | 빠름 |
| 가격 | 저렴함 | 비쌈 |
| 집적도 | 높음 | 낮음 |
| 소비 전력 | 낮음 | 높음 |
| 사용 용도 | 주기억장치(RAM) | 캐시 메모리 |

## 메모리의 주소 공간
- 물리 주소와 논리 주소
    - 메모리에 저장된 정보는 프로그램이 적재되고 삭제되며 시시각각 변함. 따라서 CPU와 실행 중인 프로그램은 현재 메모리 몇 번지에 무엇이 저장되어 있는지 알지 못함
    - 물리 주소(Physical Address)
        - 정보가 실제로 저장된 하드웨어상의 주소
    - 논리 주소(Logical Address)
        - 실행 중인 프로그램 각각에게 부여된 0번지부터 시작되는 주소
        - CPU는 이 논리 주소를 받아들이고, 해석하고, 연산함
    - 논리 주소와 물리 주소 간의 변환은 CPU와 주소 버스 사이에 위치한 메모리 관리 장치(MMU; Memory Management Unit)이라는 하드웨어에 의해 수행됨.
        - MMU는 논리 주소에 베이스 레지스터 값을 더해 논리 주소를 물리 주소로 변환함.

- 메모리 보호 기법
    - 한계 레지스터(Limit Register)에는 **논리 주소의 최대 크기**를 저장함.
        - 이를 벗어나는 주소 접근이 이뤄지지 않도록 보호됨
        - 프로그램의 유효한 물리 주소 범위 = [베이스 레지스터, 베이스 레지스터 + 한계 레지스터)
    - CPU는 메모리에 접근하기 전에 접근하고자 하는 논리 주소가 한계 레지스터보다 작은지를 항상 검사함.
        - 만약 유효하지 않은 접근이라면 Trap 발생
    - 베이스 레지스터와 한계 레지스터를 이용해..
        - 실행 중인 프로그램의 독립적인 실행 공간 확보
        - 하나의 프로그램이 다른 프로그램을 침범하지 못하게 보호

- 베이스 레지스터(Base Register)
    - 프로그램의 가장 작은 물리 주소(프로그램의 첫 물리 주소)를 저장하는 셈
- 논리 주소
    - 프로그램의 시작점으로부터 떨어진 거리

- 베이스 레지스터와 베이스 레지스터 주소 지정 방식의 차이점 정리 필요함.
    - 아마도 MMU에 대해 정리 필요해 보임. 
    - 가상 메모리 정리도 필요해 보임.

## 캐시 메모리
- 저장 장치 계층 구조(Memory Hierarchy)
    - CPU가 메모리에 접근하는 시간은 CPU 연산 속도보다 느리다.
    - 빠른 저장 장치와 용량이 큰 저장 장치는 양립하기 어려움
        - CPU와 가까운 저장 장치는 빠르고, 멀리 있는 저장 장치는 느리다.
        - 속도가 빠른 저장 장치는 저장 용량이 작고, 가격이 비싸다.

- 캐시 메모리(Cache Memory)
    - CPU와 메모리 사이에 위치하고, 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 저장 장치
    - CPU의 연산 속도와 메모리 접근 속도의 차이를 조금이나마 줄이기 위해 탄생함.
    - 코어와 가까운 순서대로 계층을 구성
        - L1, L2, L3 => 계층적 캐시 메모리(Layered Cache Memory)
        - L1와 L2는 코어 내부에 L3는 코어 외부에 위치함
        - 명령어와 데이터를 따로 저장하는 분리형 캐시(Split Cache)도 있음(L1D, L1I)

- 캐싱의 과정 필요.
- SoC(System on Chip)

- 참조 지역성 원리(Locality of Reference, Principle of Locality)
    - 캐시 히트(Cache Hit)
        - 원하는 데이터가 캐시 메모리 내 존재하는 경우
    - 캐시 미스(Cache Miss)
        - 원하는 데이터가 캐시 메모리 내 존재하지 않는 경우
        - 캐시 미스가 자주 발생하면 성능이 떨어짐
    - 캐시 적중률(Cache Hit Ratio)
        - 캐시가 히트되는 비율
        - {캐시 히트 횟수} / (캐시 히트 횟수 + 캐시 미스 횟수)
        - 우리가 사용하는 컴퓨터의 캐시 적중률은 대략 85 ~ 95% 이상
    - CPU가 메모리에 접근할 때의 주된 경향
        - CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다. => 시간 지역성(Temporal Locality)
        - CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다. => 공간 지역성(Spatial Locality)

